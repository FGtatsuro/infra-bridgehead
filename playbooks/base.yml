---
- hosts: all
  # Prevent error occurs before pre_tasks. (ex. Docker container isn't running.)
  gather_facts: no
  pre_tasks:
    - name: Do pre-tasks for each connection type
      include: "pre_tasks/connection/{{ ansible_connection }}.yml"
    - name: "Gather fact information on target platform."
      setup:
    - name: Do pre-tasks for each OS
      include: "pre_tasks/os/{{ ansible_os_family }}.yml"
  roles:
    - role: FGtatsuro.python-requirements
      tags:
        - python
    - role: FGtatsuro.ruby
      tags:
        - ruby
  tasks:
    - name: Do tasks for each OS
      include: "tasks/os/{{ ansible_os_family }}.yml"
  post_tasks:
    - name: Do post-tasks for connection type
      include: "post_tasks/connection/{{ ansible_connection }}.yml"
